<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google Chart Example</title>
  <script src="https://www.google.com/jsapi"></script>
  <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
  <script src="http://prithwis.x10.bz/charts/jquery.csv-0.71.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <!--   <script src="https://jquery-csv.googlecode.com/files/jquery.csv-0.71.js"></script>-->
  <script type='text/javascript'>
    // load the visualization library from Google and set a listener
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChartfromCSV);

    function drawChartfromCSV() {
      // grab the CSV
      $.get("http://127.0.0.1:5000/report/argentina/csv", function (csvString) {
        // transform the CSV string into a 2-dimensional array
        var arrayData = $.csv.toArrays(csvString, { onParseValue: $.csv.hooks.castToScalar });
        // this new DataTable object holds all the data
        var data = new google.visualization.arrayToDataTable(arrayData);
        // this view can select a subset of the data at a time
        var view = new google.visualization.DataView(data);
        view.setColumns([0, 2]);
        var options = {
          title: "EDUCATIONAL INSTITUTIONS, SCHOOLS AND EXPENDITURE - INDIA",
          hAxis: { title: data.getColumnLabel(0), minValue: data.getColumnRange(0).min, maxValue: data.getColumnRange(0).max },
          vAxis: { title: data.getColumnLabel(2), minValue: data.getColumnRange(2).min, maxValue: data.getColumnRange(2).max },
          legend: 'none'
        };
        var chart = new google.visualization.LineChart(document.getElementById('csv2chart'));
        chart.draw(view, options);
      });
    }
  </script>


  <script type="text/javascript">

    // Load the Visualization API and the corechart package.
    google.charts.load('current', { 'packages': ['corechart'] });

    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {



      // Set chart options
      var options = {
        'title': 'How Much Pizza I Ate Last Night',
        'width': 400,
        'height': 300
      };


      $.get("http://127.0.0.1:5000/report/provincias/csv", function (csvString) {
        // transform the CSV string into a 2-dimensional array
        var arrayData = $.csv.toArrays(csvString, { onParseValue: $.csv.hooks.castToScalar });
        // this new DataTable object holds all the data
        var data = new google.visualization.arrayToDataTable(arrayData);
        // this view can select a subset of the data at a time
        var view = new google.visualization.DataView(data);
        view.setColumns([0, 3,]);
        var options = {
          title: 'My Daily Activities',
          pieHole: 0.4,
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(view, options);
      });

    }
  </script>
</head>

<body>
  <!--

  -->
  <div id="csv2chart" style="width: 900px; height: 500px;"> </div>
  <div id="chart_div" style="width: 900px; height: 500px;"> </div>
</body>

</html>